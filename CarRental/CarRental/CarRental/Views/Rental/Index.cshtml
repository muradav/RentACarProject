   @model RentDetailVM

<div class="hero inner-page" >
        
  <div class="container">
    <div class="row align-items-end ">
      <div class="col-lg-5">
        <div class="intro">
          <h1><strong>Icarə Detalları</strong></h1>
          <div class="custom-breadcrumbs">
              <a asp-controller="home" asp-action="index">Əsas səhifə</a>
              <span class="mx-2">/</span>
              <a asp-controller="car" asp-action="index">Avtomobil icarəsi</a>
              <span class="mx-2">/</span> 
              <strong>İcarə detalları</strong>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<div class="site-section">
    <div class="container bg-light px-5 py-4">
         <form method="post" asp-action="rent">
             <span class="text-danger fw-bold mb-3">@Html.ValidationMessage("Error")</span>
              <div class="row">
                   <div class="col-sm-7">
                        <div class="row">
                            <div class="col-sm-6 form-group">
                               <input class="p-2" value="@Model.User.Name" autocomplete="off" style="width:75%;" disabled>
                               <span class="text-danger" ></span>
                            </div>
                            <div class="col-sm-6 form-group">
                               <input class="p-2" value="@Model.User.Surname" autocomplete="off" style="width:75%;" disabled>
                               <span class="text-danger" ></span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-6 form-group">
                               <input class="p-2" value="@Model.User.Email" autocomplete="off" style="width:75%;" disabled>
                               <span class="text-danger" ></span>
                            </div>
                            <div class="col-sm-6 form-group">
                               <input class="p-2" value="@Model.User.PhoneNumber" placeholder="Telefon" autocomplete="off" style="width:75%;" disabled>
                               <span class="text-danger" ></span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-6 form-group">
                               <input class="p-2" value="@Model.Car.Brand.Name @Model.Car.Name" autocomplete="off" style="width:75%;" disabled>
                               <span class="text-danger" ></span>
                            </div>
                            <div class="col-sm-6 form-group">
                               <input class="p-2" value="&#8380; @Model.Car.DailyPrice"  id="dailyPrice" autocomplete="off" style="width:75%;" disabled>
                               <span class="text-danger" ></span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-6 form-group">
                                <div id="rentdatepicker" class="input-group date" >
                                    <input class="form-control" name="startDate" id="startDate" type="date" />
                                    <input type="hidden" name="carId" value="@Model.Car.Id"/>
                                    @*<span class="input-group-addon" style="position:relative;">
                                        <i class="icon-calendar" style="position: absolute; right: 20px; top: 20px;"></i>
                                    </span>*@
                                </div>
                            </div>
                            <div class="col-sm-6 form-group">
                                <div id="returndatepicker" class="input-group date" >
                                    <input class="form-control" name="endDate" id="endDate" type="date" disabled/>
                                    @*<span class="input-group-addon" style="position:relative;">
                                        <i class="icon-calendar" style="position: absolute; right: 20px; top: 20px;"></i>
                                    </span>*@
                                </div>
                            </div>
                        </div>
                   </div>
                   <div class="col-sm-1"></div>
                   <div class="col-sm-4 pt-5" style="border:gray solid 1px;"> 
                       <div class="row pt-4">
                           <div class="col-sm-9">
                               <h5><strong>Icarə müddəti(gün):</strong></h5>
                           </div>
                           <div class="col-sm-3">
                               <p id="dayCount">0</p>
                           </div>
                       </div>
                       <div class="row">
                           <div class="col-sm-9">
                               <h5><strong>Icarə qiyməti:</strong></h5>
                           </div>
                           <div class="col-sm-3">
                               <p>&#8380; <span id="totalPrice">0</span></p>
                           </div>
                       </div>
                   </div>
              </div>
              <div class="row pt-4">
                  <div class="col-sm-12 justify-content-center text-center text-light">
                      <button type="submit" class="btn btn-primary" disabled id="rentBtn">Davam Et</button>
                  </div>      
              </div>
         </form>
    </div>
</div>


 @section Scripts{
     <script> 

         let startDate = document.getElementById("startDate")
         let endDate = document.getElementById("endDate")
         let dailyPrice = document.getElementById("dailyPrice")
         let dayCount = document.getElementById("dayCount")
         let totalPrice = document.getElementById("totalPrice")
         let rentBtn = document.getElementById("rentBtn")


         startDate.onchange=function(){
             endDate.removeAttribute("disabled")

         }
         endDate.onchange=function(){
             let date1= new Date(startDate.value)
             let date2= new Date(endDate.value)

             const diffTime = Math.abs(date2 - date1);
             const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)); 
             dayCount.innerHTML=diffDays
             totalPrice.innerHTML=diffDays*dailyPrice.value.split(" ")[1]
             rentBtn.removeAttribute("disabled")
         }
     </script>
}